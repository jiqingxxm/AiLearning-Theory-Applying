# 2024é‡‘èè¡Œä¸šÂ·å¤§æ¨¡å‹æŒ‘æˆ˜èµ›



## [å®˜ç½‘åœ°å€](<https://competitions.zhipuai.cn/matchDetail?id=120241202000000003>)

æ¥æºäºç”±æ¸…åå¤§å­¦åŸºç¡€æ¨¡å‹ç ”ç©¶ä¸­å¿ƒä¸»åŠçš„ã€Š2024é‡‘èè¡Œä¸šÂ·å¤§æ¨¡å‹æŒ‘æˆ˜èµ›ã€‹ã€‚400é“æ¶‰åŠ77å¼ è¡¨ã€3000+å­—æ®µã€æ¶µç›–äº†58ä¸ªäºŒçº§å¸‚åœºå„ä¸ªé¢†åŸŸï¼ˆè‚¡æƒã€äº¤æ˜“ã€åŸºé‡‘ã€è´¢åŠ¡ã€è¡Œä¸šã€æ¸¯è‚¡ã€ç¾è‚¡ç­‰ï¼‰çš„ç±»ä¼¼é¢˜ç›®ã€‚å®Œå…¨å¤åˆ»äº†é‡‘èè¡Œä¸šäºŒçº§å¸‚åœºçš„çœŸå®éœ€æ±‚ã€‚æ¯”èµ›å†æ—¶4ä¸ªæœˆï¼Œè®¾æœ‰åˆèµ›A/Bè½®ã€å¤èµ›A/Bè½®åŠå†³èµ›ç­”è¾©å¤šä¸ªé˜¶æ®µï¼Œå¸å¼•1337ä½é€‰æ‰‹ã€300ä½™æ”¯é˜Ÿä¼å‚ä¸ï¼Œæœ€ç»ˆ44æ”¯é˜Ÿä¼æ™‹çº§å¤èµ›ï¼Œ13æ”¯é˜Ÿä¼è¿›å…¥å†³èµ›ï¼Œå……åˆ†å±•ç°å‡ºé‡‘èæ™ºèƒ½åŒ–åº”ç”¨çš„åˆ›æ–°æ½œåŠ›ã€‚

èµ›äº‹æ”¯æŒï¼š æ™ºè°±, åšæ—¶åŸºé‡‘, å®‰ç¡•ä¿¡æ¯, æ’ç”Ÿèšæº, Gitee, é­”æ­ç¤¾åŒº, ZLeadç¡…è°·å§”å‘˜ä¼š, Huggingface, WaytoAGI



## æˆ‘ä»¬çš„ä¸»é¢˜ï¼šè®©å¤§æ¨¡å‹åƒäººä¸€æ ·æ€è€ƒ

æˆ‘ä»¬çš„ç­”è¾©PPTï¼š[ShallowRestæµ…å¯»æ­¢æ­¥_å†³èµ›ç­”è¾©.pdf](https://github.com/ben1234560/AiLearning-Theory-Applying/blob/master/LLM%E5%A4%A7%E6%A8%A1%E5%9E%8B%E7%AB%9E%E8%B5%9B%E5%AE%9E%E6%88%98_%E4%BC%98%E8%83%9C%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88/2024%E9%87%91%E8%9E%8D%E8%A1%8C%E4%B8%9A%C2%B7%E5%A4%A7%E6%A8%A1%E5%9E%8B%E6%8C%91%E6%88%98%E8%B5%9B/ShallowRest_%E6%B5%85%E5%AF%BB%E6%AD%A2%E6%AD%A5.pdf)

äº®ç‚¹ï¼šè‡ªé€‚åº”æ€ç»´æœºåˆ¶ï¼ˆè‡ªåŠ¨å¿«æˆ–è€…æ·±æ€è€ƒï¼‰ã€è‡ªçº æ­£åˆ†è§£å†³ç­–æ ‘ã€‚



## é¡¹ç›®ç›®å½•ç»“æ„

```
code/
â”œâ”€â”€ config.py +++++++++++++++++++++++++++++++ é…ç½®ä¿¡æ¯å’Œæ•°æ®è¯»å–
â”œâ”€â”€ main.py +++++++++++++++++++++++++++++++++ è¿è¡Œä¸»å‡½æ•°
â”œâ”€â”€ main_all.py +++++++++++++++++++++++++++++ è¿è¡Œä¸»å‡½æ•°å¤‡ä»½ï¼ˆå…¨éƒ¨ä»£ç æ²¡æ‹†çš„æäº¤ç‰ˆï¼‰
â”œâ”€â”€ Dockerfile ++++++++++++++++++++++++++++++ ç”¨æ¥æ„å»ºdockeré•œåƒçš„æ–‡ä»¶
â””â”€â”€ agent/
    â”œâ”€â”€ __init__.py
    â”œâ”€â”€ brain.py ++++++++++++++++++++++++++++ é€»è¾‘è¿è¡Œä¸»ä»£ç 
    â”œâ”€â”€ llm_client.py +++++++++++++++++++++++++++ LLMè°ƒç”¨ä»£ç 
    â”œâ”€â”€ optimization.py +++++++++++++++++++++ è·å–åŠè°ƒæ•´ç­”æ¡ˆ
    â”œâ”€â”€ sql/
    â”‚   â”œâ”€â”€ __init__.py
    â”‚   â”œâ”€â”€ exec.py +++++++++++++++++++++++++ è¿è¡Œsql
    â”‚   â”œâ”€â”€ process_sql.py ++++++++++++++++++ sqlä¼˜åŒ–
    â”‚   â””â”€â”€ knowledge.py ++++++++++++++++++++ sqlæç¤ºè¯
    â”œâ”€â”€ embeddings/
    â”‚   â”œâ”€â”€ __init__.py
    â”‚   â””â”€â”€ embedding_utils.py+++++++++++++++ æ±‚ç›¸ä¼¼åº¦
    â”œâ”€â”€ schema/
    â”‚   â”œâ”€â”€ __init__.py
    â”‚   â”œâ”€â”€ schema_utils.py +++++++++++++++++ ç­–ç•¥ä»£ç ï¼Œè¡¨çš„åŒ¹é…ç­‰
    â””â”€â”€ question/
    â”‚   â”œâ”€â”€ __init__.py
    â”‚   â””â”€â”€ question_utils.py +++++++++++++++ é—®é¢˜é‡å†™åŠè·å–èƒŒæ™¯æ¿
    â””â”€â”€ utils/
    â”‚   â”œâ”€â”€ __init__.py
    â”‚   â””â”€â”€ async_util.py +++++++++++++++++++ å†³ç­–æ ‘ä»£ç 
    â”‚   â””â”€â”€ io_utils.py +++++++++++++++++++++ è¯»å–æ•°æ®å‡½æ•°
    â”‚   â””â”€â”€ json_utils.py +++++++++++++++++++ jsonç›¸å…³ä»£ç 
    â”‚   â””â”€â”€ text_utils.py +++++++++++++++++++ textç›¸å…³ä»£ç 
    â””â”€â”€ devlop_home/
    â”‚   â”œâ”€â”€ 2024-fic-lmc-data-0217/ +++++++++ ç›¸å…³æ•°æ®
    â”‚   â”œâ”€â”€ input_param.json ++++++++++++++++ æŒ‰èµ›æ–¹è¦æ±‚æ”¾çš„
    â”‚   â”œâ”€â”€ question.json +++++++++++++++++++ é—®é¢˜ï¼ˆåˆèµ›Aæ¦œçš„ï¼Œæˆ‘ç”¨æ¥æµ‹è¯•ï¼‰
    â”‚   â”œâ”€â”€ requirements.txt ++++++++++++++++ ä»£ç è¿è¡Œæ‰€éœ€ä¾èµ–
    â””â”€â”€ devlop_data/ ++++++++++++++++++++++++ èµ›æ–¹çº¿ä¸Šè¿è¡Œæ—¶ï¼Œæ”¾æ•°æ®çš„åœ°æ–¹
    â””â”€â”€ devlop_result/ ++++++++++++++++++++++ è¿è¡Œåæ”¾ç»“æœçš„åœ°æ–¹
```

## è¿è¡Œç¯å¢ƒ

Pythonç‰ˆæœ¬ä¸º3.10ï¼ˆ3.9+å…¼å®¹ï¼‰ï¼Œå„ä¸ªPythonåŒ…ç‰ˆæœ¬è§requirements.txtï¼Œä½¿ç”¨å¦‚ä¸‹å‘½ä»¤å³å¯å®‰è£…ï¼š

```
pip install -r code/devlop_home/requirements.txt
```



## æ„å»ºé•œåƒè¿è¡Œä»£ç 

~~~
1. ç™»å½•è®¤è¯ï¼ˆå¯ä»¥ä¸ç™»å½•ï¼Œæ¯”èµ›æ–¹çš„ç¯å¢ƒå¯èƒ½æ²¡æœ‰äº†ï¼‰ï¼š
docker login hubdocker.aminer.cn

2. åŸºç¡€é•œåƒè·å–ï¼š
docker pull hubdocker.aminer.cn/library/python-base:1.0.0

åˆ›å»ºï¼šdocker build -t hubdocker.aminer.cn/00c5912021a54b938e4f22a10eeb96cb/shallowrest_submit:v_1 .
å…¶ä¸­hubdocker.aminer.cnæ˜¯æ¯”èµ›æ–¹ç»™çš„ï¼Œæ¢æˆåˆ«çš„ä¹Ÿå¯ä»¥
è¿è¡Œæµ‹è¯•ï¼š
docker run -d --name test_v_1 hubdocker.aminer.cn/00c5912021a54b938e4f22a10eeb96cb/shallowrest_submit:v_1 tail -f /dev/null
docker exec -it test_v_1 /bin/bash

è¿è¡Œï¼š
cp /app/devlop_home/*.json /app/devlop_data/
/app/py_devlop.sh /app/devlop_data/input_param.json /app/devlop_result/answer.json
head -n40 /app/devlop_result/answer.json
~~~



## ä¸€äº›é¢å¤–çš„ç‚¹

1. ä¸¾åŠæ–¹çš„æ”¯æŒå¾ˆåˆ°ä½ï¼Œæ˜¯æˆ‘æ‰“è¿‡è¿™ä¹ˆå¤šå›½å†…æ¯”èµ›ä¸­ï¼Œå“åº”æœ€åˆ°ä½çš„äº†ã€‚ï¼ˆå°¤å…¶æ˜¯åœ¨æ–°èµ›é¢˜çš„æƒ…å†µä¸‹ï¼‰
2. åº”è¯¥èƒ½èµ°çš„å¾ˆè¿œï¼Œçœ‹é’±å¤Ÿä¸å¤Ÿäº†ã€‚

**ç¥æ¸…ç«è¶ŠåŠè¶Šå¥½ğŸ‰ğŸ‰ğŸ‰**



## ç»ˆæ¦œå­£å†›ï¼ˆå›¾è¿˜æ²¡ç»™ï¼Œä½†é’±åˆ°è´¦äº†ï¼Œç¥é€Ÿï¼ï¼‰





